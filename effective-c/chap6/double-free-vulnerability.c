#include <stdio.h>
#include <stdlib.h>

int main() {
    // allocate memory
    int *ptr = (int*)malloc(sizeof(int));

    if(ptr==NULL) {
        perror("Memory allocation failed");
        return 1;

    }

    *ptr=42;
    printf("Value: %d\n",*ptr);

    // first free
    free(ptr);
    printf("memory freed once.\n");

    // second free (dangerous)
    free(ptr);
    printf("memory freed twice (This is unsafe!).\n");
    return 0;

}

// second free(ptr) tries to free memory that has already been deallocated
// the result is undefined behavior, and depending on the system
// - it may crash (segmentation fault)
// - it may corrupt heap structures
// - it may pass silently, making debugging difficult
